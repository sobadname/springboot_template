package com.tykj.start.domain;

import java.util.ArrayList;
import java.util.List;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.Table;
import javax.persistence.Transient;

import org.hibernate.validator.constraints.NotBlank;

/**
 * 
 * 权限
 */
@Entity
@Table(name = "sys_permission")
public class Permission extends IdEntity implements Comparable<Permission> {
	@NotBlank
	private String name;
	@NotBlank
	@Column(unique = true, nullable = false)
	private String url;
	private String icon;
	private int showOrder;
	private int type;
	@NotBlank
	private String idPath;
	@NotBlank
	private Long parentId;
	@Transient
	private List<Permission> children = new ArrayList<Permission>();
	@Transient
	private Permission parent;
	@Transient
	private boolean active;

	public String getIcon() {
		return icon;
	}

	public void setIcon(String icon) {
		this.icon = icon;
	}

	public int getType() {
		return type;
	}

	public void setType(int type) {
		this.type = type;
	}

	public int getShowOrder() {
		return showOrder;
	}

	public void setShowOrder(int showOrder) {
		this.showOrder = showOrder;
	}

	public String getName() {
		return name;
	}

	public void setName(String name) {
		this.name = name;
	}

	public String getUrl() {
		return url;
	}

	public void setUrl(String url) {
		this.url = url;
	}

	public String getIdPath() {
		return idPath;
	}

	public void setIdPath(String idPath) {
		this.idPath = idPath;
	}

	public List<Permission> getChildren() {
		return children;
	}

	public void setChildren(List<Permission> children) {
		this.children = children;
	}

	public Long getParentId() {
		return parentId;
	}

	public void setParentId(Long parentId) {
		this.parentId = parentId;
	}

	public boolean isActive() {
		return active;
	}

	public void setActive(boolean active) {
		this.active = active;
	}

	public Permission getParent() {
		return parent;
	}

	public void setParent(Permission parent) {
		this.parent = parent;
	}

	@Override
	public int compareTo(Permission perm) {
		int thisLen = this.getIdPath().split(",").length;
		int otherLen = perm.getIdPath().split(",").length;
		if (thisLen > otherLen) {
			return 1;
		} else if (thisLen < otherLen) {
			return -1;
		}
		if (this.getShowOrder() > perm.getShowOrder()) {
			return 1;
		} else if (this.getShowOrder() < perm.getShowOrder()) {
			return -1;
		}
		return 0;
	}

}
